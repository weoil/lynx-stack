import { PackageManagerTabs } from '@theme';

# ä½¿ç”¨ Rsdoctor

[Rsdoctor](https://rsdoctor.dev/) æ˜¯ä¸€ä¸ªæ„å»ºåˆ†æå·¥å…·ï¼Œå¯ä»¥ç›´è§‚åœ°æ˜¾ç¤ºæ„å»ºè¿‡ç¨‹ï¼Œä¾‹å¦‚ç¼–è¯‘æ—¶é—´ã€ç¼–è¯‘å‰åçš„ä»£ç å˜åŒ–ã€æ¨¡å—å¼•ç”¨å…³ç³»ã€é‡å¤æ¨¡å—ç­‰ã€‚

å¦‚æœä½ éœ€è¦è°ƒè¯•æ„å»ºè¾“å‡ºæˆ–æ„å»ºè¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ Rsdoctor è¿›è¡Œé—®é¢˜æ’æŸ¥ã€‚

- Rsdoctor æ˜¯ä¸€ä¸ªä¸€ç«™å¼å·¥å…·ï¼Œç”¨äºè¯Šæ–­å’Œåˆ†ææ„å»ºè¿‡ç¨‹å’Œæ„å»ºäº§ç‰©
- Rsdoctor æ”¯æŒ Webpack å’Œ Rspack æ„å»ºåˆ†æçš„å·¥å…·
- Rsdoctor æ”¯æŒæ˜¾ç¤ºç¼–è¯‘æ—¶é—´å’Œè¡Œä¸ºç»†èŠ‚çš„åˆ†æ
- Rsdoctor æ”¯æŒåˆ†æ rspack å†…ç½®çš„ swc-loader ç¼–è¯‘æ—¶é—´å’Œè¿‡ç¨‹

## ğŸ”¥ ç‰¹æ€§

- **ç¼–è¯‘å¯è§†åŒ–**: Rsdoctor å¯è§†åŒ–ç¼–è¯‘è¡Œä¸ºå’Œæ—¶é—´æ¶ˆè€—ï¼Œä½¿æŸ¥çœ‹æ„å»ºé—®é¢˜å˜å¾—å®¹æ˜“ã€‚

- **å¤šç§åˆ†æèƒ½åŠ›**: Rsdoctor æ”¯æŒæ„å»ºäº§ç‰©ã€æ„å»ºæ—¶é—´åˆ†æå’Œé˜²é€€åŒ–èƒ½åŠ›ï¼š

  - æ„å»ºäº§ç‰©æ”¯æŒèµ„æºåˆ—è¡¨å’Œæ¨¡å—ä¾èµ–ç­‰ã€‚
  - æ„å»ºæ—¶é—´åˆ†ææ”¯æŒåŠ è½½å™¨ã€æ’ä»¶å’Œè§£æå™¨çš„æ„å»ºè¿‡ç¨‹åˆ†æï¼ŒåŒ…æ‹¬ï¼š**Rspack çš„å†…ç½® swc-loader**ã€‚
  - æ„å»ºè§„åˆ™æ”¯æŒé‡å¤åŒ…æ£€æµ‹å’Œ ES ç‰ˆæœ¬æ£€æŸ¥ç­‰ã€‚

- **æ”¯æŒè‡ªå®šä¹‰è§„åˆ™**: é™¤äº†å†…ç½®çš„æ„å»ºæ‰«æè§„åˆ™å¤–ï¼ŒRsdoctor è¿˜æ”¯æŒç”¨æˆ·æ ¹æ® Rsdoctor çš„æ„å»ºæ•°æ®æ·»åŠ è‡ªå®šä¹‰ç»„ä»¶æ‰«æè§„åˆ™ã€‚

## å¿«é€Ÿå¼€å§‹

åœ¨åŸºäº Rspeedy çš„é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å¯ç”¨ Rsdoctorï¼š

```bash
# dev
RSDOCTOR=true rspeedy dev

# prod
RSDOCTOR=true rspeedy build
```

è¿è¡Œä¸Šè¿°å‘½ä»¤åï¼ŒRspeedy å°†è‡ªåŠ¨æ³¨å†Œ Rsdoctor æ’ä»¶ï¼Œå¹¶åœ¨æ„å»ºå®Œæˆåæ‰“å¼€æ„å»ºåˆ†æé¡µé¢ã€‚æœ‰å…³å®Œæ•´åŠŸèƒ½ï¼Œè¯·å‚é˜… [Rsdoctor æ–‡æ¡£](https://rsdoctor.dev/)ã€‚

## é€‰é¡¹

å¦‚æœä½ éœ€è¦é…ç½®[é€‰é¡¹](https://rsdoctor.dev/config/options/options#options) provided by the Rsdoctor plugin, use [`tools.rsdoctor`](../../api/rspeedy.tools.rsdoctor).

```ts title="lynx.config.ts"
import { defineConfig } from '@lynx-js/rspeedy';

export default defineConfig({
  tools: {
    rsdoctor: {
      disableClientServer: true,
    },
  },
});
```

## ä½¿ç”¨ç‰¹å®š Rsdoctor ç‰ˆæœ¬

1. å®‰è£… Rsdoctor æ’ä»¶

<PackageManagerTabs command="add @rsdoctor/rspack-plugin -D" />

2. æ·»åŠ  `RsdoctorRspackPlugin` åˆ° `lynx.config.ts`

:::danger

- Rsdoctor ä¸åº”åœ¨ç”Ÿäº§ç‰ˆæœ¬ä¸­ä½¿ç”¨
- åœ¨ Rspeedy ä¸­ï¼Œéœ€è¦å¼€å¯ `supports.banner` é…ç½®é¡¹

:::

```ts title="lynx.config.ts"
import { RsdoctorRspackPlugin } from '@rsdoctor/rspack-plugin';

export default {
  tools: {
    rspack(config, { appendPlugins }) {
      if (process.env.RSDOCTOR === 'true') {
        appendPlugins(
          new RsdoctorRspackPlugin({
            // plugin options
            supports: { banner: true },
          }),
        );
      }
    },
  },
};
```

è¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨è‡ªå®šä¹‰ç‰ˆæœ¬çš„ Rsdoctor æ—¶ï¼Œ`tools.rsdoctor` é…ç½®é¡¹å°†ä¸èµ·ä½œç”¨ã€‚
